<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Notice</title>
<link rel="stylesheet" href="/css/Notice/NoticeHome.css">
</head>
<body>
	<!-- ν—¤λ” -->
	<div th:replace="~{header :: header}"></div>

	<main>
		<h1>π“‹NOTICE</h1>

		<!-- κ³µμ§€ μ‘μ„± λ²„νΌ -->
		<div class="write-notice" th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
		    <button onclick="window.location.href='/notices/new'">κ³µμ§€ μ‘μ„±</button>
		</div>


		<table class="notice-table">
		    <thead>
		        <tr>
		            <th>λ²νΈ</th>
		            <th>μ λ©</th>
		            <th>μ‘μ„±μ</th>
		            <!-- κ΄€λ¦¬μλ§ λ³΄μ΄λ” μ—΄ -->
		            <th th:if="${#authorization.expression('hasRole(''ADMIN'')')}">κ΄€λ¦¬μ μ „μ©</th>
		        </tr>
		    </thead>
		    <tbody>
		        <tr th:each="notice : ${notices}">
		            <td th:text="${notice.id}"></td>
		            <td>
		                <a th:href="@{/notices/view/{id}(id=${notice.id})}" th:text="${notice.title}"></a>
		            </td>
		            <td th:text="'π‘©β€π’Ό'+${notice.author}"></td>
		            <!-- κ΄€λ¦¬μλ§ λ³΄μ΄λ” μ‚­μ  λ²„νΌ -->
		            <td th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
		                <form th:action="@{/notices/delete/{id}(id=${notice.id})}" method="post" onsubmit="return confirmDelete();">
		                    <button type="submit">β</button>
		                </form>
		            </td>
		        </tr>
		    </tbody>
		</table>

		<div class="pagination">
			<!-- μ΄μ „ λ²„νΌ -->
			<button th:if="${currentPage > 0}"
				th:onclick="'location.href=\'?page=' + (${currentPage} - 1) + '&size=' + ${pageSize} + '\';'">&lt;</button>

			<!-- νμ΄μ§€ λ²νΈ -->
			<span th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
				th:classappend="${i == currentPage} ? 'active' : ''"
				th:onclick="'location.href=\'?page=' + ${i} + '&size=' + ${pageSize} + '\';'"
				th:text="${i + 1}"> </span>

			<!-- λ‹¤μ λ²„νΌ -->
			<button th:if="${currentPage < totalPages - 1}"
				th:onclick="'location.href=\'?page=' + (${currentPage} + 1) + '&size=' + ${pageSize} + '\';'">&gt;</button>
		</div>



		<!-- κ²€μƒ‰ μ„Ήμ… -->
		<div class="search-section">
			<form th:action="@{/notices}" method="get">
				<label for="search-option">κ²€μƒ‰ μµμ…:</label>
				<select id="search-option" name="option">
					<option value="title">μ λ©</option>
					<option value="content">λ‚΄μ©</option>
					<option value="title_content">μ λ©+λ‚΄μ©</option>
					<option value="author">μ‘μ„±μ</option>
				</select>
				<input type="text" id="search-input" name="keyword" placeholder="κ²€μƒ‰μ–΄λ¥Ό μ…λ ¥ν•μ„Έμ”" />
				<button type="submit">κ²€μƒ‰</button>
			</form>
		</div>
	</main>
	<script>
		function confirmDelete() {
			return confirm('κ³µμ§€μ‚¬ν•­μ„ μ‚­μ ν•μ‹κ² μµλ‹κΉ?'); // ν™•μΈ νμ—…
		}
	</script>


	<!-- ν‘Έν„° -->
	<div th:replace="~{footer :: footer}"></div>
</body>
</html>
