<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Notice Write</title>
<link rel="stylesheet" href="/css/Notice/NoticeWrite.css">

<!-- Quill CSS -->
<link href="https://cdn.quilljs.com/1.3.7/quill.snow.css"
	rel="stylesheet">
</head>
<body>

	<!-- í—¤ë” -->
	<div th:replace="~{header :: header}"></div>

	<main>
		<h1>NOTICE ì‘ì„±</h1>
		<form th:action="@{/notices/new}" method="post"
			onsubmit="return validateForm();">
			<table class="detail-table">
				<tr>
					<th>ì œëª©</th>
					<td><input type="text" name="title" id="title"
						placeholder="ì œëª©ì„ ì‘ì„±í•˜ì„¸ìš”" style="width: 99%; padding: 10px;">
					</td>
				</tr>
				<tr>
					<th>ì‘ì„±ì</th>
					<td>ğŸ‘©â€ğŸ’¼ê´€ë¦¬ì</td>
				</tr>
			</table>
			<div class="content" style="height: 300px;">
				<!-- Quill Editor -->
				<div id="editor-container" style="height: 80%;"></div>
				<!-- Hidden textarea to submit content -->
				<textarea name="content" id="hidden-content" style="display: none;"></textarea>
			</div>
			<div class="noticebuttons">
				<button type="submit">ì‘ì„± ì™„ë£Œ</button>
			</div>
		</form>
	</main>

	<!-- Quill JS -->
	<script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
	<script>
		// Initialize Quill editor with color options
		const quill = new Quill('#editor-container', {
			theme : 'snow',
			placeholder : 'ë‚´ìš©ì„ ì‘ì„±í•˜ì„¸ìš”...',
			modules : {
				toolbar : [ [ 'bold', 'italic', 'underline' ], // Text formatting
				[ {
					'list' : 'ordered'
				}, {
					'list' : 'bullet'
				} ], // Lists
				[ {
					'align' : []
				} ], // Alignment
				[ {
					'color' : []
				}, {
					'background' : []
				} ], // Text color and background color
				[ 'link', 'image' ] // Links and Images
				]
			}
		});

		// Validate form inputs before submission
		function validateForm() {
			const title = document.querySelector('#title').value.trim();
			const content = quill.root.innerHTML.trim();

			if (!title) {
				alert('ì œëª©ì„ ì‘ì„±í•˜ì„¸ìš”.');
				return false; // Prevent form submission
			}

			if (content === '<p><br></p>' || !content) { // Check if Quill content is empty
				alert('ë‚´ìš©ì„ ì‘ì„±í•˜ì„¸ìš”.');
				return false; // Prevent form submission
			}

			// If validation passes, copy Quill content to hidden textarea
			document.querySelector('#hidden-content').value = content;
			return true; // Allow form submission
		}
	</script>
</body>

<!-- í‘¸í„° -->
<div th:replace="~{footer :: footer}"></div>
</html>
